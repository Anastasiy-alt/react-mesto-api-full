(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{13:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c,a=n(1),o=n.n(a),s=n(20),i=n.n(s),r=n(8),l=(n(13),n(25)),u=n(2),p=n(3),d=o.a.createContext(),b=["title","titleId"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},h.apply(this,arguments)}function j(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},o=Object.keys(e);for(c=0;c<o.length;c++)n=o[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(c=0;c<o.length;c++)n=o[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _(e,t){var n=e.title,o=e.titleId,s=j(e,b);return a.createElement("svg",h({width:142,height:33,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},s),n?a.createElement("title",{id:o},n):null,c||(c=a.createElement("path",{d:"M0 6.737v25.871h3.758V13.875h.243l7.722 18.696h3.119l7.721-18.684h.243v18.721h3.758V6.738H21.77l-8.334 20.11h-.307L4.794 6.738H0ZM41.131 33c4.283 0 7.313-2.084 8.182-5.242l-3.618-.645c-.69 1.832-2.352 2.767-4.525 2.767-3.273 0-5.472-2.097-5.574-5.836h13.96v-1.34c0-7.01-4.244-9.752-8.693-9.752-5.472 0-9.077 4.119-9.077 10.081 0 6.026 3.554 9.967 9.345 9.967ZM35.61 21.214c.153-2.754 2.173-5.141 5.28-5.141 2.965 0 4.908 2.172 4.921 5.141H35.61ZM68.51 17.942c-.792-3.019-3.183-4.99-7.427-4.99-4.436 0-7.58 2.312-7.58 5.748 0 2.754 1.687 4.586 5.369 5.394l3.324.72c1.891.417 2.773 1.25 2.773 2.463 0 1.504-1.623 2.679-4.129 2.679-2.288 0-3.758-.973-4.218-2.88l-3.695.555c.64 3.436 3.529 5.369 7.939 5.369 4.743 0 8.028-2.489 8.028-6 0-2.742-1.764-4.434-5.369-5.256l-3.12-.707c-2.16-.505-3.093-1.225-3.08-2.539-.013-1.49 1.623-2.552 3.797-2.552 2.377 0 3.477 1.301 3.924 2.603l3.465-.607ZM82.263 13.205h-4.027V8.556h-3.823v4.65h-2.876v3.03h2.876v11.458c-.012 3.525 2.71 5.23 5.728 5.167 1.214-.013 2.032-.24 2.48-.404l-.69-3.12c-.257.05-.73.164-1.343.164-1.24 0-2.352-.404-2.352-2.59V16.237h4.026v-3.032ZM94.55 33c5.536 0 9.154-4.005 9.154-10.005 0-6.038-3.618-10.043-9.153-10.043s-9.153 4.005-9.153 10.043c0 6 3.618 10.005 9.153 10.005Zm.014-3.17c-3.618 0-5.306-3.12-5.306-6.847 0-3.714 1.688-6.873 5.306-6.873 3.592 0 5.28 3.159 5.28 6.873 0 3.726-1.688 6.846-5.28 6.846ZM107.176 8.893h1.057V5.525h1.909c.077 0 .149 0 .222-.005l1.841 3.373h1.227l-1.973-3.562c1.112-.375 1.632-1.272 1.632-2.417 0-1.524-.92-2.645-2.966-2.645h-2.949v8.624Zm1.057-4.312V1.196h1.858c1.415 0 1.96.682 1.96 1.718s-.545 1.667-1.943 1.667h-1.875ZM118.84 6.249c0 1.213-.937 1.768-1.687 1.768-.835 0-1.432-.606-1.432-1.55V2.426h-1.005v4.11c0 1.65.886 2.442 2.113 2.442.989 0 1.636-.522 1.943-1.179h.068v1.095h1.006V2.425h-1.006V6.25ZM126.324 3.874c-.315-.918-1.023-1.533-2.318-1.533-1.381 0-2.403.775-2.403 1.87 0 .892.537 1.49 1.738 1.768l1.091.253c.661.152.972.463.972.91 0 .555-.597 1.01-1.534 1.01-.823 0-1.338-.35-1.517-1.044l-.955.236c.235 1.099 1.151 1.684 2.489 1.684 1.521 0 2.556-.821 2.556-1.937 0-.901-.571-1.47-1.738-1.752l-.972-.236c-.775-.189-1.125-.446-1.125-.943 0-.556.597-.96 1.398-.96.878 0 1.24.48 1.415.927l.903-.253ZM132.593 3.874c-.315-.918-1.022-1.533-2.318-1.533-1.38 0-2.403.775-2.403 1.87 0 .892.537 1.49 1.739 1.768l1.09.253c.661.152.972.463.972.91 0 .555-.597 1.01-1.534 1.01-.822 0-1.338-.35-1.517-1.044l-.955.236c.235 1.099 1.151 1.684 2.489 1.684 1.521 0 2.557-.821 2.557-1.937 0-.901-.571-1.47-1.739-1.752l-.971-.236c-.776-.189-1.125-.446-1.125-.943 0-.556.596-.96 1.397-.96.878 0 1.24.48 1.415.927l.903-.253ZM134.227 8.893h1.005V2.425h-1.005v6.468Zm.511-7.546c.392 0 .716-.303.716-.673 0-.37-.324-.674-.716-.674-.392 0-.716.303-.716.674 0 .37.324.673.716.673ZM139 9.045c1.142 0 1.739-.607 1.943-1.028h.051v.876H142V4.632c0-2.055-1.585-2.29-2.42-2.29-.989 0-2.114.336-2.625 1.515l.954.337c.222-.472.746-.977 1.705-.977.924 0 1.38.484 1.38 1.314v.034c0 .48-.494.437-1.687.589-1.215.156-2.54.421-2.54 1.903 0 1.264.989 1.988 2.233 1.988Zm.154-.893c-.802 0-1.381-.354-1.381-1.044 0-.758.699-.994 1.483-1.095.426-.05 1.568-.168 1.738-.37v.909c0 .808-.647 1.6-1.84 1.6Z",fill:"#fff"})))}var m=a.forwardRef(_),f=(n.p,n(0));var O=function(e){var t=e.userEmail,n=e.onSignOut,c=e.loggedIn;return Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)(m,{alt:"\u041c\u0435\u0441\u0442\u043e",className:"header__logo"}),c?Object(f.jsxs)("div",{className:"header__auth",children:[Object(f.jsx)("p",{className:"header__email",children:t}),Object(f.jsx)(r.b,{className:"header__link button header__link_exit",onClick:n,to:"/sign-up",children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(f.jsxs)(p.d,{children:[Object(f.jsx)(p.b,{exact:!0,path:"/sign-in",children:Object(f.jsx)(r.b,{to:"/sign-up",className:"header__link button",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(f.jsx)(p.b,{exact:!0,path:"/sign-up",children:Object(f.jsx)(r.b,{to:"/sign-in",className:"header__link button",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})};var v=function(){return Object(f.jsx)("footer",{className:"footer",children:Object(f.jsx)("p",{className:"footer__text",children:"\xa9 2022 Mesto Russia"})})};var g=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,o=e.onCardDelete,s=Object(a.useContext)(d),i=t.owner===s._id,r=t.likes.some((function(e){return e===s._id}));console.log(i,t.owner,s._id);var l="".concat(i?"element__delete button":"element__delete_hidden"),u="button element__like ".concat(r&&"element__like_click");return Object(f.jsxs)("article",{className:"element",children:[Object(f.jsx)("button",{className:l,type:"button",onClick:function(){o(t._id)}}),Object(f.jsx)("img",{className:"element__img",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(f.jsxs)("div",{className:"element__title",children:[Object(f.jsx)("h2",{className:"element__name",children:t.name}),Object(f.jsxs)("div",{className:"element__like-container",children:[Object(f.jsx)("button",{className:u,type:"button",onClick:function(){c(t)}}),Object(f.jsx)("p",{className:"element__like-counter",children:t.likes.length})]})]})]})};var x=function(e){var t=e.onEditProfile,n=e.onAddPlace,c=e.onEditAvatar,o=e.onCardClick,s=e.onDeleteClick,i=e.cards,r=e.onCardLike,l=Object(a.useContext)(d);return Object(f.jsxs)(a.Fragment,{children:[Object(f.jsxs)("section",{className:"profile",children:[Object(f.jsxs)("div",{className:"profile__avatar-cover",children:[Object(f.jsx)("button",{className:"profile__cover-hover",type:"button",onClick:c}),Object(f.jsx)("img",{alt:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f.",src:l.avatar,className:"profile__avatar"})]}),Object(f.jsxs)("div",{className:"profile__info-block",children:[Object(f.jsxs)("div",{className:"profile__title",children:[Object(f.jsx)("h1",{className:"profile__name",children:l.name}),Object(f.jsx)("button",{className:"profile__edit-button button",type:"button",onClick:t})]}),Object(f.jsx)("p",{className:"profile__info",children:l.about})]}),Object(f.jsx)("button",{className:"profile__add-button button",type:"button",onClick:n})]}),Object(f.jsx)("section",{className:"elements",children:i.map((function(e){return Object(f.jsx)(g,{card:e,onCardClick:o,onCardLike:r,onCardDelete:s},e._id)}))})]})},N=n(22),k=n(23),C=new(function(){function e(t){Object(N.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(k.a)(e,[{key:"_check",value:function(e){return e.ok?e.json():e.json().then((function(t){return t.statusCode=e.status,Promise.reject(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",headers:this._headers,method:"GET"}).then((function(t){return e._check(t)}))}},{key:"addInitialCards",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",headers:this._headers,method:"POST",body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._check(e)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{credentials:"include",headers:this._headers,method:"GET"}).then((function(t){return e._check(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{credentials:"include",headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._check(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._check(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{credentials:"include",headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._check(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{credentials:"include",method:"DELETE",headers:this._headers}).then((function(e){return t._check(e)}))}},{key:"putLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{credentials:"include",method:"PUT",headers:this._headers}).then((function(e){return t._check(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{credentials:"include",method:"DELETE",headers:this._headers}).then((function(e){return t._check(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{credentials:"include",method:"".concat(t?"PUT":"DELETE"),headers:this._headers}).then((function(e){return n._check(e)}))}}]),e}())({baseUrl:"https://api.mesto.pilot.nomoredomains.icu",headers:{"Content-Type":"application/json"}});var y=function(e){var t=e.onClose,n=e.card;return Object(f.jsx)("div",{className:"popup popup_for_img  ".concat(n._id&&"popup_opened"),children:Object(f.jsxs)("div",{className:"popup__container popup__container_for_img",children:[Object(f.jsx)("button",{className:"button popup__close popup__close_for_img",type:"button",onClick:t}),Object(f.jsx)("img",{className:"popup__img",src:n.link,alt:n.name}),Object(f.jsx)("p",{className:"popup__info-img",children:n.name})]})})};var S=function(e){var t=e.name,n=e.title,c=e.button,a=e.isOpen,o=e.onClose,s=e.popupDelete,i=e.popupAvatar,r=e.children,l=e.onSubmit;return Object(f.jsx)("div",{className:"popup popup_for_".concat(t," ").concat(a&&"popup_opened"),children:Object(f.jsxs)("div",{className:"popup__container ".concat(s&&"popup__container_for_delete"," ").concat(i&&"popup__container_for_avatar"),children:[Object(f.jsx)("button",{className:"button popup__close popup__close_for_".concat(t),type:"button",onClick:o}),Object(f.jsx)("h3",{className:"popup__heading ".concat(s&&"popup__heading_for_delete"," ").concat(i&&"popup__heading_for_avatar"),children:n}),Object(f.jsx)("form",{className:"popup__form",name:"form-".concat(t),noValidate:!0,onSubmit:l,button:c,children:r})]})})};var E=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,o=e.button,s=Object(a.useContext)(d),i=Object(a.useState)(s.name),r=Object(u.a)(i,2),l=r[0],p=r[1],b=Object(a.useState)(s.description),h=Object(u.a)(b,2),j=h[0],_=h[1];return Object(a.useEffect)((function(){p(s.name),_(s.about)}),[s,t]),Object(f.jsx)(S,{isOpen:t,onClose:n,name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onSubmit:function(e){e.preventDefault(),c({name:l,about:j})},children:Object(f.jsxs)("fieldset",{className:"popup__input",children:[Object(f.jsxs)("label",{className:"popup__label",children:[Object(f.jsx)("input",{type:"text",className:"popup__item popup__item_input_name",name:"name",maxLength:"40",minLength:"2",required:!0,id:"name",placeholder:"\u0418\u043c\u044f",value:l||"",onChange:function(e){p(e.target.value)}}),Object(f.jsx)("span",{className:"popup__input-error name-error"})]}),Object(f.jsxs)("label",{className:"popup__label",children:[Object(f.jsx)("input",{type:"text",className:"popup__item popup__item_input_info",name:"info",maxLength:"200",minLength:"2",required:!0,id:"info",placeholder:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",value:j||"",onChange:function(e){_(e.target.value)}}),Object(f.jsx)("span",{className:"popup__input-error info-error"})]}),Object(f.jsx)("button",{className:"button popup__button popup__button_for_edit",type:"submit",children:o||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};var w=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,o=e.button,s=Object(a.useRef)();return Object(a.useEffect)((function(){s.current.value=""}),[t]),Object(f.jsx)(S,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:n,popupAvatar:!0,onSubmit:function(e){e.preventDefault(),c({avatar:s.current.value})},children:Object(f.jsxs)("fieldset",{className:"popup__input",children:[Object(f.jsxs)("label",{className:"popup__label",children:[Object(f.jsx)("input",{ref:s,type:"url",className:"popup__item popup__item_input_link-avatar",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0,id:"avatar"}),Object(f.jsx)("span",{className:"popup__input-error avatar-error"})]}),Object(f.jsx)("button",{className:"button popup__button popup__button_for_avatar",type:"submit",children:o||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};var U=function(e){var t=e.onClose,n=e.isOpen,c=e.popupDelete,a=e.name,o=e.title,s=e.button,i=e.cardId,r=e.onCardDelete;return Object(f.jsx)(S,{name:a,onClose:t,title:o,buttonText:s,onSubmit:function(e){e.preventDefault(),r(i),t()},isOpen:n,popupDelete:c,children:Object(f.jsx)("fieldset",{className:"popup__input",children:Object(f.jsx)("button",{className:"button popup__button popup__button_for_".concat(a),type:"submit",children:s||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})})};var I=function(e){var t=e.isOpen,n=e.onClose,c=e.button,o=e.onAddCard,s=Object(a.useState)([]),i=Object(u.a)(s,2),r=i[0],l=i[1],p=Object(a.useState)([]),d=Object(u.a)(p,2),b=d[0],h=d[1];return Object(a.useEffect)((function(){l(""),h("")}),[t]),Object(f.jsx)(S,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),o({name:r,link:b})},children:Object(f.jsxs)("fieldset",{className:"popup__input",children:[Object(f.jsxs)("label",{className:"popup__label",children:[Object(f.jsx)("input",{onChange:function(e){l(e.target.value)},value:r||"",type:"text",className:"popup__item popup__item_input_name",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",maxLength:"30",minLength:"2",required:!0,id:"title"}),Object(f.jsx)("span",{className:"popup__input-error title-error"})]}),Object(f.jsxs)("label",{className:"popup__label",children:[Object(f.jsx)("input",{onChange:function(e){h(e.target.value)},value:b||"",type:"url",className:"popup__item popup__item_input_info",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,id:"link"}),Object(f.jsx)("span",{className:"popup__input-error link-error"})]}),Object(f.jsx)("button",{className:"button popup__button popup__button_for_add",type:"submit",children:c||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},D=n(10),L=n(24),T=["component"],P=function(e){var t=e.component,n=Object(L.a)(e,T);return Object(f.jsx)(p.b,{children:function(){return n.loggedIn?Object(f.jsx)(t,Object(D.a)({},n)):Object(f.jsx)(p.a,{to:"/sign-in"})}})},A=n(11);var Z=function(e){var t=e.name,n=e.className,c=e.buttonName,a=e.register,o=e.userData,s=e.handleSubmit,i=e.handleChange;return Object(f.jsxs)("div",{className:"sign ".concat(n),children:[Object(f.jsx)("p",{className:"sign__welcome",children:t}),Object(f.jsxs)("form",{className:"sign__form",onSubmit:s,children:[Object(f.jsx)("input",{className:"sign__input popup__item",id:"email",name:"email",type:"email",placeholder:"Email",value:o.email||"",onChange:i,required:!0}),Object(f.jsx)("input",{className:"sign__input popup__item",id:"password",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:o.password||"",onChange:i,required:!0}),Object(f.jsx)("div",{className:"sign__button-container",children:Object(f.jsx)("button",{type:"submit",className:"button popup__button sign__link",onSubmit:a&&s,children:c})})]}),a&&Object(f.jsxs)("div",{className:"sign__signin",children:[Object(f.jsx)("p",{className:"sign__signin-text",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),"\xa0",Object(f.jsx)(r.b,{to:"/sign-in",className:"sign__login-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var M=function(e){var t=e.onRegister,n=o.a.useState({email:"",password:""}),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(f.jsx)(Z,{handleSubmit:function(e){e.preventDefault();var n=a.email,c=a.password;t(n,c)},userData:a,handleChange:function(e){var t=e.target,n=t.name,c=t.value;s((function(e){return Object(D.a)(Object(D.a)({},e),{},Object(A.a)({},n,c))}))},register:!0,className:"register",name:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})};var V=function(e){var t=e.onLogin,n=o.a.useState({email:"",password:""}),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(f.jsx)(Z,{handleSubmit:function(e){e.preventDefault();var n=a.email,c=a.password;t(n,c)},userData:a,handleChange:function(e){var t=e.target,n=t.name,c=t.value;s((function(e){return Object(D.a)(Object(D.a)({},e),{},Object(A.a)({},n,c))}))},className:"login",name:"\u0412\u0445\u043e\u0434",buttonName:"\u0412\u043e\u0439\u0442\u0438"})},J=n.p+"static/media/yes.1b6082f8.svg",q=n.p+"static/media/no.df8eddf6.svg";var H=function(e){var t=e.isOpen,n=e.onClose,c=e.loggedIn;return Object(f.jsx)("div",{className:"popup popup_for_tooltip ".concat(t&&"popup_opened"),children:Object(f.jsxs)("div",{className:"popup__container popup__container_for_tooltip",children:[Object(f.jsx)("button",{className:"button popup__close popup__close_for_tooltip",type:"button",onClick:n}),Object(f.jsx)("img",{src:c?J:q,alt:c?"\u0413\u0430\u043b\u043e\u0447\u043a\u0430.":"\u041a\u0440\u0435\u0441\u0442\u0438\u043a.",className:"popup__icon"}),Object(f.jsx)("h3",{className:"popup__heading popup__heading_for_tooltip",children:c?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"})]})})},R="https://api.mesto.pilot.nomoredomains.icu";n(41).config();var F=function(){var e=Object(p.g)(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),r=i[0],b=i[1],h=Object(a.useState)(!1),j=Object(u.a)(h,2),_=j[0],m=j[1],g=Object(a.useState)(!1),N=Object(u.a)(g,2),k=N[0],S=N[1],D=Object(a.useState)([]),L=Object(u.a)(D,2),T=L[0],A=L[1],Z=Object(a.useState)(!1),J=Object(u.a)(Z,2),q=J[0],F=J[1],G=Object(a.useState)(!1),B=Object(u.a)(G,2),z=B[0],K=B[1],Q=Object(a.useState)(!1),W=Object(u.a)(Q,2),X=W[0],Y=W[1],$=Object(a.useState)({}),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ce=Object(a.useState)({}),ae=Object(u.a)(ce,2),oe=ae[0],se=ae[1],ie=Object(a.useState)(!1),re=Object(u.a)(ie,2),le=re[0],ue=re[1],pe=Object(a.useState)(""),de=Object(u.a)(pe,2),be=de[0],he=de[1],je=function(){var t=localStorage.getItem("jwt");t||(fetch("".concat(R,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(C._check).then((function(t){b(t.email),se(t),o(!0),e.push("/")})).catch((function(e){return console.log(e)})),C.getInitialCards(t).then((function(e){A(e)})).catch((function(e){return console.log(e)})))};Object(a.useEffect)((function(){je()}),[]),Object(a.useEffect)((function(){c&&Promise.all([C.getInitialCards(),C.getUserInfo()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1];A(n),se(c)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[c]);var _e=function(){F(!1),K(!1),Y(!1),ue(!1),ne({}),S(!1)};return Object(f.jsx)(d.Provider,{value:oe,children:Object(f.jsxs)("div",{className:"page",children:[Object(f.jsx)(O,{loggedIn:c,userEmail:r,onSignOut:function(){o(!1),localStorage.removeItem("jwt"),e.push("/sign-in")}}),Object(f.jsxs)(p.d,{children:[Object(f.jsx)(P,{exact:!0,path:"/",loggedIn:c,component:x,onEditProfile:function(){F(!q)},onAddPlace:function(){K(!z)},onEditAvatar:function(){Y(!X)},onCardClick:function(e){ne(e)},onDeleteClick:function(e){ue(!le),he(e)},onUserInfo:function(e){se(e)},cards:T,onCardLike:function(e){var t=e.likes.some((function(e){return e===oe._id}));C.changeLikeCardStatus(e._id,!t).then((function(t){A((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},cardId:be}),Object(f.jsx)(p.b,{path:"/sign-in",children:Object(f.jsx)(V,{onLogin:function(t,n){return function(e,t){return fetch("".concat(R,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}).then(C._check)}(t,n).then((function(n){n&&(o(!0),localStorage.setItem("jwt",n.token),b(t),e.push("/"),je())})).catch((function(e){m(!1),S(!0),console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}})}),Object(f.jsx)(p.b,{path:"/sign-up",children:Object(f.jsx)(M,{onRegister:function(t,n){return function(e,t){return fetch("".concat(R,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(C._check)}(t,n).then((function(){m(!0),S(!0),e.push("/sign-in")})).catch((function(e){m(!1),S(!0),console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}})}),Object(f.jsx)(p.b,{children:c?Object(f.jsx)(p.a,{to:"/"}):Object(f.jsx)(p.a,{to:"/sign-in"})})]}),Object(f.jsx)(v,{}),Object(f.jsx)(H,{loggedIn:_,isOpen:k,onClose:_e}),Object(f.jsx)(E,{isOpen:q,onClose:_e,onUpdateUser:function(e){C.setUserInfo(e).then((function(e){se(e),_e()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(f.jsx)(I,{isOpen:z,onClose:_e,onAddCard:function(e){C.addCard(e).then((function(e){A([e].concat(Object(l.a)(T))),_e()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(f.jsx)(U,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",button:"\u0414\u0430",onClose:_e,isOpen:le,cardId:be,onCardDelete:function(e){C.deleteCard(e).then((function(){A((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},popupDelete:!0}),Object(f.jsx)(w,{isOpen:X,onClose:_e,onUpdateAvatar:function(e){C.setUserAvatar(e).then((function(e){se(e),_e()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(f.jsx)(y,{onClose:_e,card:te})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};i.a.createRoot(document.getElementById("root")).render(Object(f.jsx)(r.a,{children:Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(F,{})})})),G()}},[[44,1,2]]]);
//# sourceMappingURL=main.84a8a032.chunk.js.map