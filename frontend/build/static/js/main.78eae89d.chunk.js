(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{13:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a,c,o,i,s,r,l,u,p,d,b,h=n(1),j=n.n(h),_=n(19),m=n.n(_),f=n(8),O=(n(13),n(24)),C=n(2),v=n(3),g=j.a.createContext(),x=["title","titleId"];function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},N.apply(this,arguments)}function k(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function y(e,t){var n=e.title,j=e.titleId,_=k(e,x);return h.createElement("svg",N({width:143,height:34,viewBox:"0 0 143 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":j},_),n?h.createElement("title",{id:j},n):null,a||(a=h.createElement("path",{d:"M0.876465 6.81818V33H4.63499V14.0412H4.87789L12.5995 32.9616H15.7188L23.4404 14.054H23.6833V33H27.4418V6.81818H22.6478L14.3125 27.1705H14.0057L5.6705 6.81818H0.876465Z",fill:"white"})),c||(c=h.createElement("path",{d:"M42.0093 33.3963C46.292 33.3963 49.3218 31.2869 50.1911 28.0909L46.5732 27.4389C45.8829 29.2926 44.2209 30.2386 42.0476 30.2386C38.7749 30.2386 36.576 28.1165 36.4738 24.3324H50.434V22.9773C50.434 15.8821 46.1897 13.108 41.7408 13.108C36.2692 13.108 32.6641 17.2756 32.6641 23.3097C32.6641 29.4077 36.2181 33.3963 42.0093 33.3963ZM36.4866 21.4688C36.64 18.6818 38.6598 16.2656 41.7664 16.2656C44.7323 16.2656 46.6755 18.4645 46.6883 21.4688H36.4866Z",fill:"white"})),o||(o=h.createElement("path",{d:"M69.3896 18.1577C68.597 15.1023 66.2064 13.108 61.962 13.108C57.526 13.108 54.3811 15.4474 54.3811 18.9247C54.3811 21.7116 56.0686 23.5653 59.7504 24.3835L63.0743 25.1122C64.9663 25.5341 65.8484 26.3778 65.8484 27.6051C65.8484 29.1264 64.2248 30.3153 61.7192 30.3153C59.4308 30.3153 57.9606 29.331 57.5004 27.4006L53.8058 27.9631C54.445 31.4403 57.3342 33.3963 61.7447 33.3963C66.4876 33.3963 69.7731 30.8778 69.7731 27.3239C69.7731 24.5497 68.0089 22.8366 64.4038 22.0057L61.2845 21.2898C59.124 20.7784 58.1907 20.0497 58.2035 18.7202C58.1907 17.2116 59.8271 16.1378 62.0004 16.1378C64.3782 16.1378 65.4777 17.4545 65.9251 18.7713L69.3896 18.1577Z",fill:"white"})),i||(i=h.createElement("path",{d:"M83.1421 13.3636H79.1151V8.65909H75.2927V13.3636H72.4162V16.4318H75.2927V28.027C75.2799 31.5938 78.0029 33.3196 81.0199 33.2557C82.2344 33.2429 83.0526 33.0128 83.5 32.8466L82.8097 29.6889C82.554 29.7401 82.081 29.8551 81.4674 29.8551C80.2273 29.8551 79.1151 29.446 79.1151 27.2344V16.4318H83.1421V13.3636Z",fill:"white"})),s||(s=h.createElement("path",{d:"M95.4308 33.3963C100.966 33.3963 104.584 29.3438 104.584 23.2713C104.584 17.1605 100.966 13.108 95.4308 13.108C89.8953 13.108 86.2774 17.1605 86.2774 23.2713C86.2774 29.3438 89.8953 33.3963 95.4308 33.3963ZM95.4436 30.1875C91.8257 30.1875 90.1382 27.0298 90.1382 23.2585C90.1382 19.5 91.8257 16.304 95.4436 16.304C99.0359 16.304 100.723 19.5 100.723 23.2585C100.723 27.0298 99.0359 30.1875 95.4436 30.1875Z",fill:"white"})),r||(r=h.createElement("path",{d:"M108.057 9H109.114V5.59091H111.023C111.099 5.59091 111.172 5.59091 111.244 5.58665L113.085 9H114.313L112.34 5.39489C113.452 5.01562 113.972 4.10795 113.972 2.94886C113.972 1.40625 113.051 0.272727 111.006 0.272727H108.057V9ZM109.114 4.63636V1.21023H110.972C112.386 1.21023 112.932 1.90057 112.932 2.94886C112.932 3.99716 112.386 4.63636 110.989 4.63636H109.114Z",fill:"white"})),l||(l=h.createElement("path",{d:"M119.721 6.32386C119.721 7.55114 118.784 8.11364 118.034 8.11364C117.199 8.11364 116.602 7.5 116.602 6.54545V2.45455H115.596V6.61364C115.596 8.28409 116.483 9.08523 117.71 9.08523C118.699 9.08523 119.346 8.55682 119.653 7.89205H119.721V9H120.727V2.45455H119.721V6.32386Z",fill:"white"})),u||(u=h.createElement("path",{d:"M127.205 3.92045C126.89 2.99148 126.183 2.36932 124.887 2.36932C123.506 2.36932 122.484 3.15341 122.484 4.26136C122.484 5.16477 123.021 5.76989 124.222 6.05114L125.313 6.30682C125.974 6.46023 126.285 6.77557 126.285 7.22727C126.285 7.78977 125.688 8.25 124.751 8.25C123.928 8.25 123.413 7.89631 123.234 7.19318L122.279 7.43182C122.514 8.54403 123.43 9.13636 124.768 9.13636C126.289 9.13636 127.325 8.3054 127.325 7.17614C127.325 6.2642 126.754 5.68892 125.586 5.40341L124.614 5.16477C123.839 4.97301 123.489 4.71307 123.489 4.21023C123.489 3.64773 124.086 3.23864 124.887 3.23864C125.765 3.23864 126.127 3.72443 126.302 4.17614L127.205 3.92045Z",fill:"white"})),p||(p=h.createElement("path",{d:"M133.475 3.92045C133.159 2.99148 132.452 2.36932 131.157 2.36932C129.776 2.36932 128.753 3.15341 128.753 4.26136C128.753 5.16477 129.29 5.76989 130.492 6.05114L131.583 6.30682C132.243 6.46023 132.554 6.77557 132.554 7.22727C132.554 7.78977 131.958 8.25 131.02 8.25C130.198 8.25 129.682 7.89631 129.503 7.19318L128.549 7.43182C128.783 8.54403 129.699 9.13636 131.037 9.13636C132.559 9.13636 133.594 8.3054 133.594 7.17614C133.594 6.2642 133.023 5.68892 131.856 5.40341L130.884 5.16477C130.108 4.97301 129.759 4.71307 129.759 4.21023C129.759 3.64773 130.356 3.23864 131.157 3.23864C132.034 3.23864 132.397 3.72443 132.571 4.17614L133.475 3.92045Z",fill:"white"})),d||(d=h.createElement("path",{d:"M135.108 9H136.114V2.45455H135.108V9ZM135.619 1.36364C136.011 1.36364 136.335 1.05682 136.335 0.681818C136.335 0.306818 136.011 0 135.619 0C135.227 0 134.903 0.306818 134.903 0.681818C134.903 1.05682 135.227 1.36364 135.619 1.36364Z",fill:"white"})),b||(b=h.createElement("path",{d:"M139.882 9.15341C141.024 9.15341 141.62 8.53977 141.825 8.11364H141.876V9H142.882V4.6875C142.882 2.60795 141.297 2.36932 140.461 2.36932C139.473 2.36932 138.348 2.71023 137.836 3.90341L138.791 4.24432C139.012 3.76705 139.537 3.25568 140.495 3.25568C141.42 3.25568 141.876 3.74574 141.876 4.58523V4.61932C141.876 5.10511 141.382 5.0625 140.189 5.21591C138.974 5.37358 137.649 5.64205 137.649 7.14205C137.649 8.42045 138.637 9.15341 139.882 9.15341ZM140.035 8.25C139.234 8.25 138.655 7.89205 138.655 7.19318C138.655 6.42614 139.353 6.1875 140.137 6.08523C140.564 6.03409 141.706 5.91477 141.876 5.71023V6.63068C141.876 7.44886 141.228 8.25 140.035 8.25Z",fill:"white"})))}var S=h.forwardRef(y),L=(n.p,n(0));var w=function(e){var t=e.userEmail,n=e.onSignOut,a=e.loggedIn;return Object(L.jsxs)("header",{className:"header",children:[Object(L.jsx)(S,{alt:"\u041c\u0435\u0441\u0442\u043e",className:"header__logo"}),a?Object(L.jsxs)("div",{className:"header__auth",children:[Object(L.jsx)("p",{className:"header__email",children:t}),Object(L.jsx)(f.b,{className:"header__link button header__link_exit",onClick:n,to:"/sign-up",children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(L.jsxs)(v.d,{children:[Object(L.jsx)(v.b,{exact:!0,path:"/sign-in",children:Object(L.jsx)(f.b,{to:"/sign-up",className:"header__link button",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(L.jsx)(v.b,{exact:!0,path:"/sign-up",children:Object(L.jsx)(f.b,{to:"/sign-in",className:"header__link button",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})};var E=function(){return Object(L.jsx)("footer",{className:"footer",children:Object(L.jsx)("p",{className:"footer__text",children:"\xa9 2022 Mesto Russia"})})};var H=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,c=e.onCardDelete,o=Object(h.useContext)(g),i=t.owner===o._id,s=t.likes.some((function(e){return e===o._id})),r="".concat(i?"element__delete button":"element__delete_hidden"),l="button element__like ".concat(s&&"element__like_click");return Object(L.jsxs)("article",{className:"element",children:[Object(L.jsx)("button",{className:r,type:"button",onClick:function(){c(t._id)}}),Object(L.jsx)("img",{className:"element__img",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(L.jsxs)("div",{className:"element__title",children:[Object(L.jsx)("h2",{className:"element__name",children:t.name}),Object(L.jsxs)("div",{className:"element__like-container",children:[Object(L.jsx)("button",{className:l,type:"button",onClick:function(){a(t)}}),Object(L.jsx)("p",{className:"element__like-counter",children:t.likes.length})]})]})]})};var U=function(e){var t=e.onEditProfile,n=e.onAddPlace,a=e.onEditAvatar,c=e.onCardClick,o=e.onDeleteClick,i=e.cards,s=e.onCardLike,r=Object(h.useContext)(g);return Object(L.jsxs)(h.Fragment,{children:[Object(L.jsxs)("section",{className:"profile",children:[Object(L.jsxs)("div",{className:"profile__avatar-cover",children:[Object(L.jsx)("button",{className:"profile__cover-hover",type:"button",onClick:a}),Object(L.jsx)("img",{alt:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f.",src:r.avatar,className:"profile__avatar"})]}),Object(L.jsxs)("div",{className:"profile__info-block",children:[Object(L.jsxs)("div",{className:"profile__title",children:[Object(L.jsx)("h1",{className:"profile__name",children:r.name}),Object(L.jsx)("button",{className:"profile__edit-button button",type:"button",onClick:t})]}),Object(L.jsx)("p",{className:"profile__info",children:r.about})]}),Object(L.jsx)("button",{className:"profile__add-button button",type:"button",onClick:n})]}),Object(L.jsx)("section",{className:"elements",children:i.map((function(e){return Object(L.jsx)(H,{card:e,onCardClick:c,onCardLike:s,onCardDelete:o},e._id)}))})]})},I=n(21),V=n(22),D=new(function(){function e(t){Object(I.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(V.a)(e,[{key:"_check",value:function(e){return e.ok?e.json():e.json().then((function(t){return t.statusCode=e.status,Promise.reject(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",headers:this._headers,method:"GET"}).then((function(t){return e._check(t)}))}},{key:"addInitialCards",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",headers:this._headers,method:"POST",body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._check(e)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{credentials:"include",headers:this._headers,method:"GET"}).then((function(t){return e._check(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{credentials:"include",headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._check(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._check(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{credentials:"include",headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._check(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{credentials:"include",method:"DELETE",headers:this._headers}).then((function(e){return t._check(e)}))}},{key:"putLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{credentials:"include",method:"PUT",headers:this._headers}).then((function(e){return t._check(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{credentials:"include",method:"DELETE",headers:this._headers}).then((function(e){return t._check(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{credentials:"include",method:"".concat(t?"PUT":"DELETE"),headers:this._headers}).then((function(e){return n._check(e)}))}}]),e}())({baseUrl:"https://api.mesto.pilot.nomoredomains.icu",headers:{"Content-Type":"application/json"}});var T=function(e){var t=e.onClose,n=e.card;return Object(L.jsx)("div",{className:"popup popup_for_img  ".concat(n._id&&"popup_opened"),children:Object(L.jsxs)("div",{className:"popup__container popup__container_for_img",children:[Object(L.jsx)("button",{className:"button popup__close popup__close_for_img",type:"button",onClick:t}),Object(L.jsx)("img",{className:"popup__img",src:n.link,alt:n.name}),Object(L.jsx)("p",{className:"popup__info-img",children:n.name})]})})};var P=function(e){var t=e.name,n=e.title,a=e.button,c=e.isOpen,o=e.onClose,i=e.popupDelete,s=e.popupAvatar,r=e.children,l=e.onSubmit;return Object(L.jsx)("div",{className:"popup popup_for_".concat(t," ").concat(c&&"popup_opened"),children:Object(L.jsxs)("div",{className:"popup__container ".concat(i&&"popup__container_for_delete"," ").concat(s&&"popup__container_for_avatar"),children:[Object(L.jsx)("button",{className:"button popup__close popup__close_for_".concat(t),type:"button",onClick:o}),Object(L.jsx)("h3",{className:"popup__heading ".concat(i&&"popup__heading_for_delete"," ").concat(s&&"popup__heading_for_avatar"),children:n}),Object(L.jsx)("form",{className:"popup__form",name:"form-".concat(t),noValidate:!0,onSubmit:l,button:a,children:r})]})})};var M=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,c=e.button,o=Object(h.useContext)(g),i=Object(h.useState)(o.name),s=Object(C.a)(i,2),r=s[0],l=s[1],u=Object(h.useState)(o.description),p=Object(C.a)(u,2),d=p[0],b=p[1];return Object(h.useEffect)((function(){l(o.name),b(o.about)}),[o,t]),Object(L.jsx)(P,{isOpen:t,onClose:n,name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onSubmit:function(e){e.preventDefault(),a({name:r,about:d})},children:Object(L.jsxs)("fieldset",{className:"popup__input",children:[Object(L.jsxs)("label",{className:"popup__label",children:[Object(L.jsx)("input",{type:"text",className:"popup__item popup__item_input_name",name:"name",maxLength:"40",minLength:"2",required:!0,id:"name",placeholder:"\u0418\u043c\u044f",value:r||"",onChange:function(e){l(e.target.value)}}),Object(L.jsx)("span",{className:"popup__input-error name-error"})]}),Object(L.jsxs)("label",{className:"popup__label",children:[Object(L.jsx)("input",{type:"text",className:"popup__item popup__item_input_info",name:"info",maxLength:"200",minLength:"2",required:!0,id:"info",placeholder:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",value:d||"",onChange:function(e){b(e.target.value)}}),Object(L.jsx)("span",{className:"popup__input-error info-error"})]}),Object(L.jsx)("button",{className:"button popup__button popup__button_for_edit",type:"submit",children:c||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};var A=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,c=e.button,o=Object(h.useRef)();return Object(h.useEffect)((function(){o.current.value=""}),[t]),Object(L.jsx)(P,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:n,popupAvatar:!0,onSubmit:function(e){e.preventDefault(),a({avatar:o.current.value})},children:Object(L.jsxs)("fieldset",{className:"popup__input",children:[Object(L.jsxs)("label",{className:"popup__label",children:[Object(L.jsx)("input",{ref:o,type:"url",className:"popup__item popup__item_input_link-avatar",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0,id:"avatar"}),Object(L.jsx)("span",{className:"popup__input-error avatar-error"})]}),Object(L.jsx)("button",{className:"button popup__button popup__button_for_avatar",type:"submit",children:c||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};var Z=function(e){var t=e.onClose,n=e.isOpen,a=e.popupDelete,c=e.name,o=e.title,i=e.button,s=e.cardId,r=e.onCardDelete;return Object(L.jsx)(P,{name:c,onClose:t,title:o,buttonText:i,onSubmit:function(e){e.preventDefault(),r(s),t()},isOpen:n,popupDelete:a,children:Object(L.jsx)("fieldset",{className:"popup__input",children:Object(L.jsx)("button",{className:"button popup__button popup__button_for_".concat(c),type:"submit",children:i||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})})};var J=function(e){var t=e.isOpen,n=e.onClose,a=e.button,c=e.onAddCard,o=Object(h.useState)([]),i=Object(C.a)(o,2),s=i[0],r=i[1],l=Object(h.useState)([]),u=Object(C.a)(l,2),p=u[0],d=u[1];return Object(h.useEffect)((function(){r(""),d("")}),[t]),Object(L.jsx)(P,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:s,link:p})},children:Object(L.jsxs)("fieldset",{className:"popup__input",children:[Object(L.jsxs)("label",{className:"popup__label",children:[Object(L.jsx)("input",{onChange:function(e){r(e.target.value)},value:s||"",type:"text",className:"popup__item popup__item_input_name",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",maxLength:"30",minLength:"2",required:!0,id:"title"}),Object(L.jsx)("span",{className:"popup__input-error title-error"})]}),Object(L.jsxs)("label",{className:"popup__label",children:[Object(L.jsx)("input",{onChange:function(e){d(e.target.value)},value:p||"",type:"url",className:"popup__item popup__item_input_info",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,id:"link"}),Object(L.jsx)("span",{className:"popup__input-error link-error"})]}),Object(L.jsx)("button",{className:"button popup__button popup__button_for_add",type:"submit",children:a||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},q=n(10),R=n(23),F=["component"],B=function(e){var t=e.component,n=Object(R.a)(e,F);return Object(L.jsx)(v.b,{children:function(){return n.loggedIn?Object(L.jsx)(t,Object(q.a)({},n)):Object(L.jsx)(v.a,{to:"/sign-in"})}})},G=n(11);var z=function(e){var t=e.name,n=e.className,a=e.buttonName,c=e.register,o=e.userData,i=e.handleSubmit,s=e.handleChange;return Object(L.jsxs)("div",{className:"sign ".concat(n),children:[Object(L.jsx)("p",{className:"sign__welcome",children:t}),Object(L.jsxs)("form",{className:"sign__form",onSubmit:i,children:[Object(L.jsx)("input",{className:"sign__input popup__item",id:"email",name:"email",type:"email",placeholder:"Email",value:o.email||"",onChange:s,required:!0}),Object(L.jsx)("input",{className:"sign__input popup__item",id:"password",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:o.password||"",onChange:s,required:!0}),Object(L.jsx)("div",{className:"sign__button-container",children:Object(L.jsx)("button",{type:"submit",className:"button popup__button sign__link",onSubmit:c&&i,children:a})})]}),c&&Object(L.jsxs)("div",{className:"sign__signin",children:[Object(L.jsx)("p",{className:"sign__signin-text",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),"\xa0",Object(L.jsx)(f.b,{to:"/sign-in",className:"sign__login-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var K=function(e){var t=e.onRegister,n=j.a.useState({email:"",password:""}),a=Object(C.a)(n,2),c=a[0],o=a[1];return Object(L.jsx)(z,{handleSubmit:function(e){e.preventDefault();var n=c.email,a=c.password;t(n,a)},userData:c,handleChange:function(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(q.a)(Object(q.a)({},e),{},Object(G.a)({},n,a))}))},register:!0,className:"register",name:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})};var Q=function(e){var t=e.onLogin,n=j.a.useState({email:"",password:""}),a=Object(C.a)(n,2),c=a[0],o=a[1];return Object(L.jsx)(z,{handleSubmit:function(e){e.preventDefault();var n=c.email,a=c.password;t(n,a)},userData:c,handleChange:function(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(q.a)(Object(q.a)({},e),{},Object(G.a)({},n,a))}))},className:"login",name:"\u0412\u0445\u043e\u0434",buttonName:"\u0412\u043e\u0439\u0442\u0438"})},W=n.p+"static/media/yes.1b6082f8.svg",X=n.p+"static/media/no.df8eddf6.svg";var Y=function(e){var t=e.isOpen,n=e.onClose,a=e.loggedIn;return Object(L.jsx)("div",{className:"popup popup_for_tooltip ".concat(t&&"popup_opened"),children:Object(L.jsxs)("div",{className:"popup__container popup__container_for_tooltip",children:[Object(L.jsx)("button",{className:"button popup__close popup__close_for_tooltip",type:"button",onClick:n}),Object(L.jsx)("img",{src:a?W:X,alt:a?"\u0413\u0430\u043b\u043e\u0447\u043a\u0430.":"\u041a\u0440\u0435\u0441\u0442\u0438\u043a.",className:"popup__icon"}),Object(L.jsx)("h3",{className:"popup__heading popup__heading_for_tooltip",children:a?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"})]})})},$="https://api.mesto.pilot.nomoredomains.icu";var ee=function(){var e=Object(v.g)(),t=Object(h.useState)(!1),n=Object(C.a)(t,2),a=n[0],c=n[1],o=Object(h.useState)(""),i=Object(C.a)(o,2),s=i[0],r=i[1],l=Object(h.useState)(!1),u=Object(C.a)(l,2),p=u[0],d=u[1],b=Object(h.useState)(!1),j=Object(C.a)(b,2),_=j[0],m=j[1],f=Object(h.useState)([]),x=Object(C.a)(f,2),N=x[0],k=x[1],y=Object(h.useState)(!1),S=Object(C.a)(y,2),H=S[0],I=S[1],V=Object(h.useState)(!1),P=Object(C.a)(V,2),q=P[0],R=P[1],F=Object(h.useState)(!1),G=Object(C.a)(F,2),z=G[0],W=G[1],X=Object(h.useState)({}),ee=Object(C.a)(X,2),te=ee[0],ne=ee[1],ae=Object(h.useState)({}),ce=Object(C.a)(ae,2),oe=ce[0],ie=ce[1],se=Object(h.useState)(!1),re=Object(C.a)(se,2),le=re[0],ue=re[1],pe=Object(h.useState)(""),de=Object(C.a)(pe,2),be=de[0],he=de[1],je=function(){var t=localStorage.getItem("jwt");t||(fetch("".concat($,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(D._check).then((function(t){r(t.email),ie(t),c(!0),e.push("/")})).catch((function(e){return console.log(e)})),D.getInitialCards(t).then((function(e){k(e)})).catch((function(e){return console.log(e)})))};Object(h.useEffect)((function(){je()}),[]),Object(h.useEffect)((function(){a&&Promise.all([D.getInitialCards(),D.getUserInfo()]).then((function(e){var t=Object(C.a)(e,2),n=t[0],a=t[1];k(n),ie(a)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[a]);var _e=function(){I(!1),R(!1),W(!1),ue(!1),ne({}),m(!1)};return Object(L.jsx)(g.Provider,{value:oe,children:Object(L.jsxs)("div",{className:"page",children:[Object(L.jsx)(w,{loggedIn:a,userEmail:s,onSignOut:function(){c(!1),localStorage.removeItem("jwt"),e.push("/sign-in")}}),Object(L.jsxs)(v.d,{children:[Object(L.jsx)(B,{exact:!0,path:"/",loggedIn:a,component:U,onEditProfile:function(){I(!H)},onAddPlace:function(){R(!q)},onEditAvatar:function(){W(!z)},onCardClick:function(e){ne(e)},onDeleteClick:function(e){ue(!le),he(e)},onUserInfo:function(e){ie(e)},cards:N,onCardLike:function(e){var t=e.likes.some((function(e){return e===oe._id}));D.changeLikeCardStatus(e._id,!t).then((function(t){k((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},cardId:be}),Object(L.jsx)(v.b,{path:"/sign-in",children:Object(L.jsx)(Q,{onLogin:function(t,n){return function(e,t){return fetch("".concat($,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}).then(D._check)}(t,n).then((function(n){n&&(c(!0),localStorage.setItem("jwt",n.token),r(t),e.push("/"),je())})).catch((function(e){d(!1),m(!0),console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}})}),Object(L.jsx)(v.b,{path:"/sign-up",children:Object(L.jsx)(K,{onRegister:function(t,n){return function(e,t){return fetch("".concat($,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(D._check)}(t,n).then((function(){d(!0),m(!0),e.push("/sign-in")})).catch((function(e){d(!1),m(!0),console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}})}),Object(L.jsx)(v.b,{children:a?Object(L.jsx)(v.a,{to:"/"}):Object(L.jsx)(v.a,{to:"/sign-in"})})]}),Object(L.jsx)(E,{}),Object(L.jsx)(Y,{loggedIn:p,isOpen:_,onClose:_e}),Object(L.jsx)(M,{isOpen:H,onClose:_e,onUpdateUser:function(e){D.setUserInfo(e).then((function(e){ie(e),_e()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(L.jsx)(J,{isOpen:q,onClose:_e,onAddCard:function(e){D.addCard(e).then((function(e){k([e].concat(Object(O.a)(N))),_e()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(L.jsx)(Z,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",button:"\u0414\u0430",onClose:_e,isOpen:le,cardId:be,onCardDelete:function(e){D.deleteCard(e).then((function(){k((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},popupDelete:!0}),Object(L.jsx)(A,{isOpen:z,onClose:_e,onUpdateAvatar:function(e){D.setUserAvatar(e).then((function(e){ie(e),_e()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(L.jsx)(T,{onClose:_e,card:te})]})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};m.a.createRoot(document.getElementById("root")).render(Object(L.jsx)(f.a,{children:Object(L.jsx)(j.a.StrictMode,{children:Object(L.jsx)(ee,{})})})),te()}},[[41,1,2]]]);
//# sourceMappingURL=main.78eae89d.chunk.js.map